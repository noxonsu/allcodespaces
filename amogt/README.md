# API –û–±—Ä–∞–±–æ—Ç–∫–∏ –õ–∏–¥–æ–≤ —á–µ—Ä–µ–∑ –ü–∞—Ä—Ç–Ω–µ—Ä–æ–≤

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç API, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–µ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º–∏, –ø–æ–∑–≤–æ–ª—è—è –∏–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –¥–ª—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –æ–ø–ª–∞—Ç ChatGPT –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ª–∏–¥–æ–≤ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É, –∞ —Ç–∞–∫–∂–µ –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç—á–µ—Ç–æ–≤ –ø–æ –ª–∏–¥–∞–º.

> üìÅ **[–ü–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](PROJECT_STRUCTURE.md)** - –ü–æ–ª–Ω–æ–µ –¥–µ—Ä–µ–≤–æ —Ñ–∞–π–ª–æ–≤ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º  
> üìä **[–°–∏—Å—Ç–µ–º–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤](PARTNER_TRANSACTIONS_README.md)** - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Å–∏—Å—Ç–µ–º–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è  
> üîÑ **[–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ API](API_MIGRATION_GUIDE.md)** - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π –¥–ª—è –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤  
> üìù **[–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π](CHANGELOG.md)** - –î–µ—Ç–∞–ª—å–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

## ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø –í API (2025)

**–í–Ω–∏–º–∞–Ω–∏–µ –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º:** –í API –±—ã–ª–∏ –≤–Ω–µ—Å–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ª–æ–≥–∏–∫–µ dealId:
- ‚úÖ **dealId —Ç–µ–ø–µ—Ä—å –≤—Å–µ–≥–¥–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º** - –ø–∞—Ä—Ç–Ω–µ—Ä—ã –±–æ–ª—å—à–µ –Ω–µ –º–æ–≥—É—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ dealId
- ‚úÖ **–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ dealId –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è timestamp + —Å–ª—É—á–∞–π–Ω–æ–µ —á–∏—Å–ª–æ
- ‚ùå **–ü–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏–µ dealId –±–æ–ª—å—à–µ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è** - –ª—é–±—ã–µ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ dealId –±—É–¥—É—Ç –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω—ã

### –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è:
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–µ–π paymentUrl** - –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ URL –±—É–¥—É—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω—ã —Å –æ—à–∏–±–∫–æ–π 400
- ‚úÖ **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–∏–¥–æ–≤** - –≤—Å–µ –ª–∏–¥—ã (API –∏ webhook) —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ
- ‚úÖ **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö** - –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –ª–∏–¥–æ–≤

### –£–ª—É—á—à–µ–Ω–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è:
- ‚úÖ **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ prod/test –æ–∫—Ä—É–∂–µ–Ω–∏–π** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –¥–∞–Ω–Ω—ã—Ö –∏ –ª–æ–≥–æ–≤
- ‚úÖ **–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –¥–µ—Ç–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –¥–ª—è –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤
- ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –ø—Ä–æ–¥–∞–∫—à–Ω URL

**–î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** —Å–º. [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ API](API_MIGRATION_GUIDE.md).

## –û–±–∑–æ—Ä

API –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
1.  **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤** –ø–æ —É–Ω–∏–∫–∞–ª—å–Ω–æ–º—É API —Ç–æ–∫–µ–Ω—É.
2.  **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–æ–º –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤**: –ø—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–∫—É—â–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞.
3.  **–†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø–ª–∞—Ç–µ–∂–∞**: –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø–ª–∞—Ç–µ–∂–∞ –≤ –≤–∞–ª—é—Ç–µ –±–∞–ª–∞–Ω—Å–∞ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –∫—É—Ä—Å–æ–≤.
4.  **–ü—Ä–æ–≤–µ–¥–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π**: —Å–ø–∏—Å–∞–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤ —Å –±–∞–ª–∞–Ω—Å–∞ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ –¥–ª—è –æ–ø–ª–∞—Ç—ã —É—Å–ª—É–≥.
5.  **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π**.
6.  **–ü—Ä–∏–µ–º –ª–∏–¥–æ–≤ –æ—Ç –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤**: –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ—Ç –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π API –ø–ª–∞—Ç–µ–∂–µ–π).
7.  **–ü—Ä–∏–µ–º –æ—Ç—á–µ—Ç–æ–≤ –ø–æ –ª–∏–¥–∞–º (Zeno Report)**: —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ª–∏–¥–æ–≤.

–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º–∏, –∏—Ö –±–∞–ª–∞–Ω—Å–∞–º–∏ –∏ –∫—É—Ä—Å–∞–º–∏ –≤–∞–ª—é—Ç.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ü—Ä–æ–µ–∫—Ç–∞

```
/amogt/
‚îú‚îÄ‚îÄ data_production/                 # –ü—Ä–æ–¥–∞–∫—à–Ω –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îú‚îÄ‚îÄ allLeads.json               # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –ª–∏–¥–æ–≤ (–ø—Ä–æ–¥–∞–∫—à–Ω)
‚îÇ   ‚îú‚îÄ‚îÄ amo_fields.json             # –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–ª–µ–π AmoCRM
‚îÇ   ‚îú‚îÄ‚îÄ amo_tokens.json             # OAuth2 —Ç–æ–∫–µ–Ω—ã AmoCRM
‚îÇ   ‚îú‚îÄ‚îÄ id_of_deals_sent_to_amo.txt # ID –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Å–¥–µ–ª–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ pipelines.json              # –í–æ—Ä–æ–Ω–∫–∏ –∏ —ç—Ç–∞–ø—ã AmoCRM
‚îÇ   ‚îú‚îÄ‚îÄ recieved_amo_ids.txt        # ID –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ AmoCRM
‚îÇ   ‚îî‚îÄ‚îÄ zeno_report.json            # –û—Ç—á–µ—Ç—ã –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
‚îú‚îÄ‚îÄ data_test/                      # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îú‚îÄ‚îÄ allLeads.json               # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –ª–∏–¥–æ–≤ (—Ç–µ—Å—Ç)
‚îÇ   ‚îú‚îÄ‚îÄ amo_fields.json             # –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–ª–µ–π AmoCRM (—Ç–µ—Å—Ç)
‚îÇ   ‚îú‚îÄ‚îÄ amo_tokens.json             # OAuth2 —Ç–æ–∫–µ–Ω—ã AmoCRM (—Ç–µ—Å—Ç)
‚îÇ   ‚îú‚îÄ‚îÄ blocked_deals.txt           # –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–¥–µ–ª–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ field_mapping.json          # –ú–∞–ø–ø–∏–Ω–≥ –ø–æ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ id_of_deals_sent_to_amo.txt # ID –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Å–¥–µ–ª–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ my-project-1337-*.json      # –ö–ª—é—á —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ Google
‚îÇ   ‚îú‚îÄ‚îÄ mycity2_key.json            # –ö–ª—é—á —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ Google
‚îÇ   ‚îú‚îÄ‚îÄ pipelines.json              # –í–æ—Ä–æ–Ω–∫–∏ –∏ —ç—Ç–∞–ø—ã AmoCRM
‚îÇ   ‚îú‚îÄ‚îÄ recieved_amo_ids.txt        # ID –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ AmoCRM
‚îÇ   ‚îú‚îÄ‚îÄ recieved_api_ids.txt        # ID –ª–∏–¥–æ–≤ –æ—Ç –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ zeno_report.json            # –û—Ç—á–µ—Ç—ã –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ (—Ç–µ—Å—Ç)
‚îú‚îÄ‚îÄ gpt_payment_api/                # API –ø–ª–∞—Ç–µ–∂–µ–π –∏ –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ admin/                      # –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ templates/              # HTML —à–∞–±–ª–æ–Ω—ã –∞–¥–º–∏–Ω–∫–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard.php       # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–¥–º–∏–Ω–∫–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ header.php          # –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ footer.php          # –ü–æ–¥–≤–∞–ª —Å—Ç—Ä–∞–Ω–∏—Ü
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login.php           # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ manage_partners.php # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ manage_rates.php    # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–∞–º–∏ –≤–∞–ª—é—Ç
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ view_transactions.php # –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ instructions.php    # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.php                # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.php               # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –∞–¥–º–∏–Ω–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ partners.php            # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rates.php               # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–∞–º–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ transactions.php        # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ lib/                        # –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth_partner.php        # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ db.php                  # –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payment_core.php        # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils.php               # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ api.php                     # –ì–ª–∞–≤–Ω—ã–π API —ç–Ω–¥–ø–æ–∏–Ω—Ç
‚îú‚îÄ‚îÄ lib/                            # –û–±—â–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ amo_auth_utils.php          # –£—Ç–∏–ª–∏—Ç—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ AmoCRM
‚îÇ   ‚îú‚îÄ‚îÄ json_storage_utils.php      # –†–∞–±–æ—Ç–∞ —Å JSON —Ñ–∞–π–ª–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ payment_link_parser.php     # –ü–∞—Ä—Å–∏–Ω–≥ —Å—Å—ã–ª–æ–∫ –Ω–∞ –æ–ø–ª–∞—Ç—É
‚îÇ   ‚îî‚îÄ‚îÄ request_utils.php           # HTTP –∑–∞–ø—Ä–æ—Å—ã –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
‚îú‚îÄ‚îÄ logs_production/                # –õ–æ–≥–∏ –ø—Ä–æ–¥–∞–∫—à–Ω
‚îÇ   ‚îú‚îÄ‚îÄ amo2json.log               # –õ–æ–≥–∏ –≤–µ–±—Ö—É–∫–∞ AmoCRM
‚îÇ   ‚îú‚îÄ‚îÄ app.log                    # –û–±—â–∏–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ zeno_report.log            # –õ–æ–≥–∏ –æ—Ç—á–µ—Ç–æ–≤ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
‚îú‚îÄ‚îÄ logs_test/                     # –õ–æ–≥–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ amo2json.log               # –õ–æ–≥–∏ –≤–µ–±—Ö—É–∫–∞ AmoCRM (—Ç–µ—Å—Ç)
‚îÇ   ‚îú‚îÄ‚îÄ app.log                    # –û–±—â–∏–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—Ç–µ—Å—Ç)
‚îÇ   ‚îú‚îÄ‚îÄ excel2amo.log              # –õ–æ–≥–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ Excel
‚îÇ   ‚îî‚îÄ‚îÄ zeno_report.log            # –õ–æ–≥–∏ –æ—Ç—á–µ—Ç–æ–≤ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ (—Ç–µ—Å—Ç)
‚îú‚îÄ‚îÄ .env.example                   # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ .env.production               # –ü—Ä–æ–¥–∞–∫—à–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ .env.test                     # –¢–µ—Å—Ç–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ .gitignore                    # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ Git —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ .htaccess                     # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Apache
‚îú‚îÄ‚îÄ alldeals_json.php             # –ü—Ä–æ—Å–º–æ—Ç—Ä –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–∏–¥–∞–º–∏
‚îú‚îÄ‚îÄ amo2json_webhook.php          # –í–µ–±—Ö—É–∫ AmoCRM
‚îú‚îÄ‚îÄ composer.json                 # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Composer
‚îú‚îÄ‚îÄ config.php                    # –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ index.php                     # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ logger.php                    # –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ readme.md                     # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ stripe_debug.html             # –û—Ç–ª–∞–¥–∫–∞ Stripe
‚îú‚îÄ‚îÄ test_amo2json.php             # –¢–µ—Å—Ç –≤–µ–±—Ö—É–∫–∞ AmoCRM
‚îú‚îÄ‚îÄ test_amo_auth.php             # –¢–µ—Å—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ AmoCRM
‚îú‚îÄ‚îÄ test_data_report.php          # –¢–µ—Å—Ç –æ—Ç—á–µ—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ test_partner_api.php          # –¢–µ—Å—Ç API –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ test_stripe_parser.php        # –¢–µ—Å—Ç –ø–∞—Ä—Å–µ—Ä–∞ Stripe
‚îú‚îÄ‚îÄ test_webhook_sender.html      # –¢–µ—Å—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤–µ–±—Ö—É–∫–æ–≤
‚îú‚îÄ‚îÄ test_zeno_report.php          # –¢–µ—Å—Ç –æ—Ç—á–µ—Ç–æ–≤ Zeno
‚îî‚îÄ‚îÄ zeno_report.php               # –≠–Ω–¥–ø–æ–∏–Ω—Ç –æ—Ç—á–µ—Ç–æ–≤ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
```

## –û–ø–∏—Å–∞–Ω–∏–µ –û—Å–Ω–æ–≤–Ω—ã—Ö –§–∞–π–ª–æ–≤

### –ö–æ—Ä–Ω–µ–≤—ã–µ —Ñ–∞–π–ª—ã
*   **`config.php`** - –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞, –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ `.env` —Ñ–∞–π–ª–æ–≤ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –æ–∫—Ä—É–∂–µ–Ω–∏—è
*   **`logger.php`** - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π (INFO, WARNING, ERROR)
*   **`index.php`** - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ–µ–∫—Ç–∞ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –∑–∞–ø—É—Å–∫–∞ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á
*   **`alldeals_json.php`** - –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–∞–π–ª–æ–º `allLeads.json`
*   **`amo2json_webhook.php`** - –í–µ–±—Ö—É–∫ –¥–ª—è –ø—Ä–∏–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ AmoCRM –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ª–æ–∫–∞–ª—å–Ω—É—é –±–∞–∑—É
*   **`zeno_report.php`** - –≠–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –ø—Ä–∏–µ–º–∞ –æ—Ç—á–µ—Ç–æ–≤ –æ—Ç –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤/–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –æ —Å—Ç–∞—Ç—É—Å–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ª–∏–¥–æ–≤

### –ü–ª–∞—Ç–µ–∂–Ω–æ–µ API (`gpt_payment_api/`)
*   **`api.php`** - –ì–ª–∞–≤–Ω—ã–π API —ç–Ω–¥–ø–æ–∏–Ω—Ç, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ (–±–∞–ª–∞–Ω—Å, –ø–ª–∞—Ç–µ–∂–∏, –ø—Ä–∏–µ–º –ª–∏–¥–æ–≤)
*   **`admin/index.php`** - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º–∏ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏
*   **`lib/auth_partner.php`** - –ö–ª–∞—Å—Å –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ –ø–æ API —Ç–æ–∫–µ–Ω–∞–º
*   **`lib/payment_core.php`** - –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞–º–∏
*   **`lib/db.php`** - –†–∞–±–æ—Ç–∞ —Å JSON-–±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

### –û–±—â–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (`lib/`)
*   **`amo_auth_utils.php`** - –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è OAuth2 –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å AmoCRM
*   **`json_storage_utils.php`** - –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å JSON —Ñ–∞–π–ª–∞–º–∏
*   **`payment_link_parser.php`** - –ü–∞—Ä—Å–∏–Ω–≥ —Å—Å—ã–ª–æ–∫ –Ω–∞ –æ–ø–ª–∞—Ç—É (Stripe, PayPal –∏ –¥—Ä.)
*   **`request_utils.php`** - HTTP –∑–∞–ø—Ä–æ—Å—ã, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ñ–∞–π–ª–æ–≤, cURL –æ–ø–µ—Ä–∞—Ü–∏–∏

### –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã
*   **`test_*.php`** - –ù–∞–±–æ—Ä —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã
*   **`test_webhook_sender.html`** - HTML —Ñ–æ—Ä–º–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤–µ–±—Ö—É–∫–æ–≤
*   **`stripe_debug.html`** - –û—Ç–ª–∞–¥–æ—á–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Stripe –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –î–∞–Ω–Ω—ã–µ –∏ –ª–æ–≥–∏
*   **`data_test/` –∏ `data_production/`** - –†–∞–∑–¥–µ–ª–µ–Ω–Ω—ã–µ –ø–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è–º —Ñ–∞–π–ª—ã –¥–∞–Ω–Ω—ã—Ö
*   **`logs_test/` –∏ `logs_production/`** - –†–∞–∑–¥–µ–ª–µ–Ω–Ω—ã–µ –ø–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è–º –ª–æ–≥ —Ñ–∞–π–ª—ã
*   **`.env.*`** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ API –∏ –∞–¥–º–∏–Ω–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–¥–∞–Ω—ã –≤ —Ñ–∞–π–ª–µ `.env` –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `amogt/`.
*   `GPT_ADMIN_USERNAME`, `GPT_ADMIN_PASSWORD_HASH`
*   –ù–∞—Å—Ç—Ä–æ–π–∫–∏ AmoCRM (`AMO_DOMAIN`, `AMO_INTEGRATION_ID` –∏ —Ç.–¥.)
*   –ü—Ä–æ—á–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –∫–∞–∫ —É–∫–∞–∑–∞–Ω–æ –≤ `config.php`.

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏–π –∏ ID AmoCRM

–ü—Ä–æ–µ–∫—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è: `test` (—Ç–µ—Å—Ç–æ–≤–æ–µ) –∏ `production` (—Ä–∞–±–æ—á–µ–µ). –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö `.env` —Ñ–∞–π–ª–∞—Ö:
*   `amogt/.env.test` - –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è.
*   `amogt/.env.production` - –¥–ª—è —Ä–∞–±–æ—á–µ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

–§–∞–π–ª `amogt/config.php` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ –Ω—É–∂–Ω–æ–≥–æ `.env` —Ñ–∞–π–ª–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è `APP_ENV`.
*   –ï—Å–ª–∏ `APP_ENV` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤ `production`, –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω `amogt/.env.production`.
*   –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ (–µ—Å–ª–∏ `APP_ENV` –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∏–ª–∏ –∏–º–µ–µ—Ç –¥—Ä—É–≥–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ), –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω `amogt/.env.test`.

–í —ç—Ç–∏—Ö `.env` —Ñ–∞–π–ª–∞—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ ID –≤–æ—Ä–æ–Ω–æ–∫, —Å—Ç–∞—Ç—É—Å–æ–≤ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–æ–ª–µ–π –¥–ª—è –≤–∞—à–µ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ AmoCRM.

### –ö–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ (APP_ENV)

–î–ª—è –≤—ã–±–æ—Ä–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è (test –∏–ª–∏ production) –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `APP_ENV`.

*   **–î–ª—è Apache (—á–µ—Ä–µ–∑ `.htaccess`):**
    –í—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä–æ–∫—É –≤ —Ñ–∞–π–ª `amogt/.htaccess` (–∏–ª–∏ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é VirtualHost –≤–∞—à–µ–≥–æ Apache —Å–µ—Ä–≤–µ—Ä–∞), —á—Ç–æ–±—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ `production`:
    ```apache
    SetEnv APP_ENV production
    ```
    –ï—Å–ª–∏ —ç—Ç–∞ —Å—Ç—Ä–æ–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è `test` –æ–∫—Ä—É–∂–µ–Ω–∏–µ.

*   **–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ (–¥–ª—è —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏):**
    ```bash
    export APP_ENV=production
    ```
    –≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç `APP_ENV` —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞.

*   **–î–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ (Linux/macOS):**
    –î–æ–±–∞–≤—å—Ç–µ `export APP_ENV=production` –≤ –≤–∞—à —Ñ–∞–π–ª `.bashrc`, `.zshrc` –∏–ª–∏ `.profile`.

*   **–ù–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–µ (Nginx + PHP-FPM):**
    –í–∞–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å `env[APP_ENV] = production` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤–∞—à–µ–≥–æ PHP-FPM –ø—É–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `www.conf`) –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å PHP-FPM.

**–í–∞–∂–Ω–æ:** –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ `APP_ENV=production` —Ç–æ–ª—å–∫–æ –≤ —Ç–µ—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö, –∫–æ—Ç–æ—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —è–≤–ª—è—é—Ç—Å—è production, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è production-–∫–ª—é—á–µ–π –≤ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å—Ä–µ–¥–∞—Ö.

### –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å ID –∏–∑ AmoCRM

ID –ø–æ–ª–µ–π, –≤–æ—Ä–æ–Ω–æ–∫ –∏ —Å—Ç–∞—Ç—É—Å–æ–≤ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏:

1.  **–ß–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å AmoCRM (–¥–ª—è –ø–æ–ª–µ–π):**
    *   –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ AmoCRM -> –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -> –ü–æ–ª—è.
    *   –ü—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ–ª—è –∏–ª–∏ –ø—Ä–∏ –µ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –≤ URL –∏–ª–∏ –≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –±—Ä–∞—É–∑–µ—Ä–∞ –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å ID –ø–æ–ª—è.

2.  **–ß–µ—Ä–µ–∑ API AmoCRM:**
    *   –í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å API AmoCRM –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–æ–≤ –ø–æ–ª–µ–π, –≤–æ—Ä–æ–Ω–æ–∫ –∏ —Å—Ç–∞—Ç—É—Å–æ–≤ –≤–º–µ—Å—Ç–µ —Å –∏—Ö ID.
    *   –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª–µ–π —Å–¥–µ–ª–æ–∫: `GET /api/v4/leads/custom_fields`
    *   –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤–æ—Ä–æ–Ω–æ–∫ –∏ –∏—Ö —Å—Ç–∞—Ç—É—Å–æ–≤: `GET /api/v4/leads/pipelines`

3.  **–ò–∑ —Ñ–∞–π–ª–æ–≤ `data/amo_fields.json` –∏ `data/pipelines.json`:**
    –≠—Ç–∏ —Ñ–∞–π–ª—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `amogt/data/` —Å–æ–¥–µ—Ä–∂–∞—Ç JSON-—Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–æ–ª–µ–π –∏ –≤–æ—Ä–æ–Ω–æ–∫ (–≤–∫–ª—é—á–∞—è —Å—Ç–∞—Ç—É—Å—ã) —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ. –û–Ω–∏, –≤–µ—Ä–æ—è—Ç–Ω–æ, —è–≤–ª—è—é—Ç—Å—è —ç–∫—Å–ø–æ—Ä—Ç–æ–º –∏–ª–∏ –∫—ç—à–µ–º –¥–∞–Ω–Ω—ã—Ö –∏–∑ –≤–∞—à–µ–≥–æ AmoCRM.
    *   **`amogt/data/amo_fields.json`**:
        *   –ù–∞–π–¥–∏—Ç–µ –Ω—É–∂–Ω–æ–µ –ø–æ–ª–µ –ø–æ –µ–≥–æ –∏–º–µ–Ω–∏ (`"name": "–ò–º—è –ø–æ–ª—è"`).
        *   –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π `"id"` –±—É–¥–µ—Ç ID —ç—Ç–æ–≥–æ –ø–æ–ª—è.
        *   –î–ª—è –ø–æ–ª–µ–π —Ç–∏–ø–∞ `select` (–≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫), —Ç–∞–∫–∏—Ö –∫–∞–∫ "–í–∞–ª—é—Ç–∞ –∑–∞–ø—Ä–æ—Å–∞", –≤–Ω—É—Ç—Ä–∏ –æ–±—ä–µ–∫—Ç–∞ –ø–æ–ª—è –±—É–¥–µ—Ç –º–∞—Å—Å–∏–≤ `enums`, –≥–¥–µ –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç `"id"` (—ç—Ç–æ Enum ID) –∏ `"value"` (–∑–Ω–∞—á–µ–Ω–∏–µ).
        –ü—Ä–∏–º–µ—Ä –¥–ª—è –ø–æ–ª—è "–í–∞–ª—é—Ç–∞ –∑–∞–ø—Ä–æ—Å–∞":
        ```json
        {
            "id": 636815,
            "name": "–í–∞–ª—é—Ç–∞ –∑–∞–ø—Ä–æ—Å–∞",
            "type": "select",
            // ... –¥—Ä—É–≥–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ ...
            "enums": [
                {"id": 456991, "value": "USD", "sort": 500},
                {"id": 456993, "value": "EUR", "sort": 1},
                // ... –¥—Ä—É–≥–∏–µ –≤–∞–ª—é—Ç—ã ...
            ]
        }
        ```
        –ó–¥–µ—Å—å `636815` - —ç—Ç–æ ID –ø–æ–ª—è "–í–∞–ª—é—Ç–∞ –∑–∞–ø—Ä–æ—Å–∞", –∞ `456991` - —ç—Ç–æ Enum ID –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏—è "USD".

    *   **`amogt/data/pipelines.json`**:
        *   –≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∞—Å—Å–∏–≤ –≤–æ—Ä–æ–Ω–æ–∫ –≤ `_embedded.pipelines`.
        *   –ö–∞–∂–¥–∞—è –≤–æ—Ä–æ–Ω–∫–∞ –∏–º–µ–µ—Ç `"id"` –∏ `"name"`.
        *   –í–Ω—É—Ç—Ä–∏ –∫–∞–∂–¥–æ–π –≤–æ—Ä–æ–Ω–∫–∏ –≤ `_embedded.statuses` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –º–∞—Å—Å–∏–≤ —Å—Ç–∞—Ç—É—Å–æ–≤ (—ç—Ç–∞–ø–æ–≤) —ç—Ç–æ–π –≤–æ—Ä–æ–Ω–∫–∏, –∫–∞–∂–¥—ã–π —Å–æ —Å–≤–æ–∏–º `"id"` –∏ `"name"`.
        –ü—Ä–∏–º–µ—Ä –¥–ª—è "–û—Å–Ω–æ–≤–Ω–æ–π –≤–æ—Ä–æ–Ω–∫–∏" (ID `8824470`):
        ```json
        {
            "id": 8824470,
            "name": "–í–æ—Ä–æ–Ω–∫–∞",
            // ... –¥—Ä—É–≥–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ ...
            "_embedded": {
                "statuses": [
                    {
                        "id": 71325730,
                        "name": "–ù–µ—Ä–∞–∑–æ–±—Ä–∞–Ω–Ω–æ–µ",
                        // ...
                    },
                    {
                        "id": 74304782,
                        "name": "CHATGPT",
                        // ...
                    }
                    // ... –¥—Ä—É–≥–∏–µ —Å—Ç–∞—Ç—É—Å—ã ...
                ]
            }
        }
        ```
        –ó–¥–µ—Å—å `8824470` - ID –≤–æ—Ä–æ–Ω–∫–∏, `74304782` - ID —Å—Ç–∞—Ç—É—Å–∞ "CHATGPT".

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è ID –≤ `.env` —Ñ–∞–π–ª–∞—Ö:

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ –≤–∞—à–∏—Ö `.env.test` –∏ `.env.production` —Ñ–∞–π–ª–∞—Ö —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ ID –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

*   `AMO_MAIN_PIPELINE_ID`
*   `AMO_CHATGPT_STATUS_ID`
*   `AMO_FINAL_OPERATOR_STATUS_ID`
*   `AMO_CF_ID_PAYMENT_LINK`
*   `AMO_CF_ID_REQUEST_AMOUNT`
*   `AMO_CF_ID_REQUEST_CURRENCY`
*   `AMO_CURRENCY_ENUM_ID_USD`
*   `AMO_CURRENCY_ENUM_ID_EUR`
*   `AMO_CURRENCY_ENUM_ID_KZT`
*   `AMO_CURRENCY_ENUM_ID_RUB`
*   `AMO_CURRENCY_ENUM_ID_GBP`
*   `AMO_CURRENCY_ENUM_ID_TL`
*   `AMO_CURRENCY_ENUM_ID_TRY`

## –û–±—â–∞—è —Å—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã —Å –ª–∏–¥–∞–º–∏

–õ–∏–¥—ã –≤ —Å–∏—Å—Ç–µ–º–µ –º–æ–≥—É—Ç –ø–æ—Å—Ç—É–ø–∞—Ç—å –∏–∑ –¥–≤—É—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

1.  **–õ–∏–¥—ã –∏–∑ AmoCRM**:
    *   –ü–æ—Å—Ç—É–ø–∞—é—Ç —á–µ—Ä–µ–∑ –≤–µ–±—Ö—É–∫ –Ω–∞ —Å–∫—Ä–∏–ø—Ç `amogt/amo2json.php`.
    *   –î–∞–Ω–Ω—ã–µ –æ –ª–∏–¥–µ (–≤–∫–ª—é—á–∞—è `dealId` –∏ `paymentUrl`) —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –¥–∞–Ω–Ω—ã—Ö –ª–∏–¥–æ–≤: `amogt/allLeads.json`.
    *   –≠—Ç–æ—Ç —Ñ–∞–π–ª –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è.

2.  **–õ–∏–¥—ã –æ—Ç –ü–∞—Ä—Ç–Ω–µ—Ä–æ–≤**:
    *   –ü–æ—Å—Ç—É–ø–∞—é—Ç —á–µ—Ä–µ–∑ –æ—Å–Ω–æ–≤–Ω–æ–π API `amogt/gpt_payment_api/api.php` —Å `action=submit_partner_lead`.
    *   –ü–∞—Ä—Ç–Ω–µ—Ä –ø–µ—Ä–µ–¥–∞–µ—Ç –º–∞—Å—Å–∏–≤ –ª–∏–¥–æ–≤, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å `paymentUrl` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) –∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ `dealId` (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –ª–∏–¥–∞ —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –ø–∞—Ä—Ç–Ω–µ—Ä–∞).
    *   –ü–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º, `dealId` –∫–∞–∂–¥–æ–≥–æ –ª–∏–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞ –¥—É–±–ª–∏–∫–∞—Ç –≤ —Ñ–∞–π–ª–µ `amogt/recieved_api_ids.txt`. –ï—Å–ª–∏ ID —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –ª–∏–¥ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è. –ù–æ–≤—ã–µ ID –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ —ç—Ç–æ—Ç —Ñ–∞–π–ª.
    *   –î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–Ω—è—Ç—ã—Ö –ª–∏–¥–æ–≤ (—Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º `partnerId` –∏ `partner_name` –Ω–∞ –æ—Å–Ω–æ–≤–µ API —Ç–æ–∫–µ–Ω–∞) —Ç–∞–∫–∂–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª `amogt/allLeads.json`.

3.  **–û–±—Ä–∞–±–æ—Ç–∫–∞ –ª–∏–¥–æ–≤ –∏ –û—Ç—á–µ—Ç–Ω–æ—Å—Ç—å (–û–ø–µ—Ä–∞—Ç–æ—Ä—ã/Zeno)**:
    *   –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Zeno) –ø–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ª–∏–¥–æ–≤ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑ `amogt/alldeals_json.php`.
    *   –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã –ø–æ –ª–∏–¥—É, —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ (–∏–ª–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä –≤—Ä—É—á–Ω—É—é) –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç—á–µ—Ç —á–µ—Ä–µ–∑ —ç–Ω–¥–ø–æ–∏–Ω—Ç `amogt/zeno_report.php`.
    *   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã `zeno_report.php`**:
        *   `GET id={lead_id}`: –ì–¥–µ `{lead_id}` - —ç—Ç–æ `dealId` –∏–∑ `allLeads.json`.
        *   `GET status={status}`: –°—Ç–∞—Ç—É—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ª–∏–¥–∞. –û–∂–∏–¥–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: "–£—Å–ø–µ—à–Ω–æ", "–û–®–ò–ë–ö–ê!".
        *   `GET amount={amount}` (optional): –°—É–º–º–∞ (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ).
        *   `GET currency={currency}` (optional): –í–∞–ª—é—Ç–∞ (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ).
        *   `GET email={email}` (optional): Email (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ).
        *   `GET card={card}` (optional): –ö–∞—Ä—Ç–∞ (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ).
        *   `GET partner_id={partner_id}` (optional): ID –ø–∞—Ä—Ç–Ω–µ—Ä–∞, –µ—Å–ª–∏ –æ—Ç—á–µ—Ç –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–æ–º—É –ª–∏–¥—É (—ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –º–æ–∂–Ω–æ –≤–∑—è—Ç—å –∏–∑ –ø–æ–ª—è `partnerId` –ª–∏–¥–∞, –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –∏–∑ `amodeals_json.php`). **–ï—Å–ª–∏ —ç—Ç–æ –ø–æ–ª–µ –ø–µ—Ä–µ–¥–∞–Ω–æ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ AmoCRM –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å—Å—è –Ω–µ –±—É–¥–µ—Ç.**
        *   *–õ—é–±—ã–µ –¥—Ä—É–≥–∏–µ –ø–æ–ª—è, –∫–æ—Ç–æ—Ä—ã–µ —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ö–æ—á–µ—Ç –ø–µ—Ä–µ–¥–∞—Ç—å –≤ –æ—Ç—á–µ—Ç–µ —á–µ—Ä–µ–∑ GET-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã.*
    *   **–õ–æ–≥–∏–∫–∞ `zeno_report.php`**:
        *   –í—Å–µ –æ—Ç—á–µ—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `amogt/zeno_report.json`.
        *   –ï—Å–ª–∏ –≤ –∑–∞–ø—Ä–æ—Å–µ **–ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç `partner_id`**, —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –æ—Ç—á–µ—Ç –ø–æ –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–æ–º—É –ª–∏–¥—É, –∏ –Ω–∏–∫–∞–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π —Å AmoCRM –Ω–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è.
        *   –ï—Å–ª–∏ `partner_id` **–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç**:
            *   –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–µ –±—ã–ª –ª–∏ —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω –¥–∞–Ω–Ω—ã–π `lead_id` –¥–ª—è AmoCRM (–ø–æ —Ñ–∞–π–ª—É `amogt/id_of_deals_sent_to_amo.txt`).
            *   –ï—Å–ª–∏ `lead_id` –Ω–æ–≤—ã–π, –æ–Ω –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ `id_of_deals_sent_to_amo.txt`.
            *   –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –ø–æ–∏—Å–∫ —Å–¥–µ–ª–∫–∏ –≤ AmoCRM –ø–æ `lead_id`.
            *   –ï—Å–ª–∏ —Å–¥–µ–ª–∫–∞ –Ω–∞–π–¥–µ–Ω–∞ –∏ –µ–µ –ø–æ–ª–µ —Å—Ç–∞—Ç—É—Å–∞ ("–°—Ç–∞—Ç—É—Å –æ–ø–ª–∞—Ç—ã ChatGPT") –ø—É—Å—Ç–æ–µ, —Ç–æ –ø–æ–ª—è —Å–¥–µ–ª–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è, –∏, –µ—Å–ª–∏ –æ—Ç—á–µ—Ç–Ω—ã–π —Å—Ç–∞—Ç—É—Å –Ω–µ "–û–®–ò–ë–ö–ê!", —Å–¥–µ–ª–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—Å—è –Ω–∞ —ç—Ç–∞–ø "–§–∏–Ω–∞–ª—å–Ω—ã–π –û–ø–µ—Ä–∞—Ç–æ—Ä—Å–∫–∏–π".

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, `amogt/allLeads.json` —è–≤–ª—è–µ—Ç—Å—è —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º –¥–∞–Ω–Ω—ã—Ö –æ –ª–∏–¥–∞—Ö, –∞ `recieved_api_ids.txt` –∏ `id_of_deals_sent_to_amo.txt` —Å–ª—É–∂–∞—Ç –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥—É–±–ª–∏—Ä—É—é—â–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π.

## –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã API

### –û—Å–Ω–æ–≤–Ω–æ–π API –ü–∞—Ä—Ç–Ω–µ—Ä–æ–≤ (–ü–ª–∞—Ç–µ–∂–∏ –∏ –ü—Ä–∏–µ–º –õ–∏–¥–æ–≤)

–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ —ç—Ç–æ–º—É API –¥–æ–ª–∂–Ω—ã –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –Ω–∞ `–≤–∞—à_–¥–æ–º–µ–Ω/amogt/gpt_payment_api/api.php`.
–ú–µ—Ç–æ–¥ –ø–µ—Ä–µ–¥–∞—á–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤: `GET` –∏–ª–∏ `POST` (–¥–ª—è `submit_partner_lead` - `POST` —Å JSON —Ç–µ–ª–æ–º).
–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞: JSON.

#### –û–±—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ –∏–Ω–æ–µ):
*   `api_token` (string, required): –£–Ω–∏–∫–∞–ª—å–Ω—ã–π API —Ç–æ–∫–µ–Ω –ø–∞—Ä—Ç–Ω–µ—Ä–∞. –ü–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∫–∞–∫ GET/POST –ø–∞—Ä–∞–º–µ—Ç—Ä, –ª–∏–±–æ –≤ JSON —Ç–µ–ª–µ –¥–ª—è `submit_partner_lead`.

#### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –ø–∞—Ä—Ç–Ω–µ—Ä–∞
*   **Action**: `get_balance`
    *   **–ú–µ—Ç–æ–¥**: `GET`
    *   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: `api_token`
    *   **–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (200 OK)**:
        ```json
        {
            "status": "success",
            "balance": 100.50,
            "currency": "USD",
            "partner_name": "–ò–º—è –ø–∞—Ä—Ç–Ω–µ—Ä–∞"
        }
        ```
    *   **–û—à–∏–±–∫–∏**: 401 (–Ω–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω), 500 (–≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞).

#### 2. –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø–ª–∞—Ç–µ–∂–∞
*   **Action**: `calculate_payment_cost`
    *   **–ú–µ—Ç–æ–¥**: `GET`
    *   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
        *   `api_token` (string, required): API —Ç–æ–∫–µ–Ω –ø–∞—Ä—Ç–Ω–µ—Ä–∞.
        *   `amount` (float, required): –°—É–º–º–∞ –ø–ª–∞—Ç–µ–∂–∞ –≤ –≤–∞–ª—é—Ç–µ ChatGPT (USD).
        *   `currency` (string, required): –í–∞–ª—é—Ç–∞ –ø–ª–∞—Ç–µ–∂–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "USD").
    *   **–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (200 OK)**:
        ```json
        {
            "status": "success",
            "original_amount": 20.00,
            "original_currency": "USD",
            "converted_amount": 18.00,
            "converted_currency": "EUR",
            "exchange_rate": 0.9
        }
        ```
    *   **–û—à–∏–±–∫–∏**: 400 (–Ω–µ–≤–µ—Ä–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã), 401, 500.

#### 3. –ü—Ä–æ–≤–µ–¥–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
*   **Action**: `make_payment`
    *   **–ú–µ—Ç–æ–¥**: `POST`
    *   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
        *   `api_token` (string, required): API —Ç–æ–∫–µ–Ω –ø–∞—Ä—Ç–Ω–µ—Ä–∞.
        *   `amount` (float, required): –°—É–º–º–∞ –ø–ª–∞—Ç–µ–∂–∞ –≤ –≤–∞–ª—é—Ç–µ ChatGPT (USD).
        *   `currency` (string, required): –í–∞–ª—é—Ç–∞ –ø–ª–∞—Ç–µ–∂–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "USD").
        *   `transaction_id` (string, required): –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –ø–∞—Ä—Ç–Ω–µ—Ä–∞ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥—É–±–ª–µ–π.
        *   `description` (string, optional): –û–ø–∏—Å–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞.
    *   **–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (200 OK)**:
        ```json
        {
            "status": "success",
            "message": "Payment processed successfully.",
            "transaction_id": "—É–Ω–∏–∫–∞–ª—å–Ω—ã–π_ID_—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏",
            "new_balance": 80.50
        }
        ```
    *   **–û—à–∏–±–∫–∏**: 400, 401, 402 (–Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤), 409 (–¥—É–±–ª–∏–∫–∞—Ç `transaction_id`), 500.

#### 4. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
*   **Action**: `get_transaction_status`
    *   **–ú–µ—Ç–æ–¥**: `GET`
    *   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
        *   `api_token` (string, required): API —Ç–æ–∫–µ–Ω –ø–∞—Ä—Ç–Ω–µ—Ä–∞.
        *   `transaction_id` (string, required): ID —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, —Å—Ç–∞—Ç—É—Å –∫–æ—Ç–æ—Ä–æ–π –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å.
    *   **–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (200 OK)**:
        ```json
        {
            "status": "success",
            "transaction_id": "—É–Ω–∏–∫–∞–ª—å–Ω—ã–π_ID_—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏",
            "payment_status": "completed", // "pending", "failed", "completed"
            "amount": 20.00,
            "currency": "USD",
            "timestamp": "2023-10-27 10:00:00"
        }
        ```
    *   **–û—à–∏–±–∫–∏**: 400, 401, 404 (—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞), 500.

#### 5. –û—Ç–ø—Ä–∞–≤–∫–∞ –ª–∏–¥–æ–≤ –æ—Ç –ø–∞—Ä—Ç–Ω–µ—Ä–∞ (–ø–∞–∫–µ—Ç–Ω–∞—è)
*   **Action**: `submit_partner_lead`
*   **–ú–µ—Ç–æ–¥**: `POST`
*   **–§–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞**: JSON (—Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞)
*   **‚ö†Ô∏è –í–ê–ñ–ù–û:** `dealId` —Ç–µ–ø–µ—Ä—å –≤—Å–µ–≥–¥–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º! –ù–µ –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ dealId.
*   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã (–≤ —Ç–µ–ª–µ JSON-–∑–∞–ø—Ä–æ—Å–∞)**:
    *   `action` (string, required): –î–æ–ª–∂–µ–Ω –±—ã—Ç—å `"submit_partner_lead"`.
    *   `api_token` (string, required): –£–Ω–∏–∫–∞–ª—å–Ω—ã–π API —Ç–æ–∫–µ–Ω –ø–∞—Ä—Ç–Ω–µ—Ä–∞ –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.
    *   `lead_data` (array, required): –ú–∞—Å—Å–∏–≤ JSON-–æ–±—ä–µ–∫—Ç–æ–≤, –≥–¥–µ –∫–∞–∂–¥—ã–π –æ–±—ä–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –ª–∏–¥. –ö–∞–∂–¥—ã–π –ª–∏–¥ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∫–∞–∫ –º–∏–Ω–∏–º—É–º `paymentUrl` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏ —É–Ω–∏–∫–∞–ª—å–Ω–æ). –ü–æ–ª—è `dealId`, `created_at` –∏ `last_updated` –≤—Å–µ–≥–¥–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º –∏ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è, –µ—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω—ã –ø–∞—Ä—Ç–Ω–µ—Ä–æ–º. –õ—é–±—ã–µ –¥—Ä—É–≥–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–æ–ª—è —Ç–∞–∫–∂–µ –º–æ–≥—É—Ç –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω—ã. –ü–æ–ª–µ `partnerId` –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ/–ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω–æ —Å–µ—Ä–≤–µ—Ä–æ–º –Ω–∞ –æ—Å–Ω–æ–≤–µ `api_token`.
*   **–ü—Ä–∏–º–µ—Ä —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞**:
    ```json
    {
        "action": "submit_partner_lead",
        "api_token": "–í–ê–®_API_–¢–û–ö–ï–ù",
        "lead_data": [
            {
                "paymentUrl": "https://pay.openai.com/unique-url-1",
                "customerName": "John Doe",
                "customerEmail": "john@example.com",
                "custom_field_example": "some_value"
            },
            {
                "paymentUrl": "https://stripe.com/pay/unique-url-2",
                "custom_notes": "Another lead with different data"
            }
        ]
    }
    ```
*   **–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (200 OK)**:
    ```json
    {
        "status": "success",
        "message": "Processed X leads. Added to main list: Y.",
        "processed_count": X,
        "added_to_main_list_count": Y,
        "generated_deal_ids": ["12345678_1641234567", "12345679_1641234568"],
        "errors": [] // –ú–∞—Å—Å–∏–≤ –æ—à–∏–±–æ–∫, –µ—Å–ª–∏ –∫–∞–∫–∏–µ-—Ç–æ –ª–∏–¥—ã –Ω–µ —É–¥–∞–ª–æ—Å—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å
    }
    ```
*   **–í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏**:
    *   **400 Bad Request**: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç paymentUrl, –¥—É–±–ª–∏—Ä—É—é—â–∏–π—Å—è paymentUrl, –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ —Å–ø–∏—Å–∞–Ω–∏–µ)
    *   **401 Unauthorized**: –ù–µ–≤–µ—Ä–Ω—ã–π –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π API —Ç–æ–∫–µ–Ω
    *   **402 Payment Required**: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –±–∞–ª–∞–Ω—Å–µ (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ)
    *   **405 Method Not Allowed**: –ù–µ–≤–µ—Ä–Ω—ã–π HTTP –º–µ—Ç–æ–¥ (—Ç–æ–ª—å–∫–æ POST)
    *   **429 Too Many Requests**: –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤ (rate limiting)
    *   **500 Internal Server Error**: –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
*   **–ü—Ä–∏–º–µ—Ä –æ—à–∏–±–∫–∏ (–¥—É–±–ª–∏–∫–∞—Ç paymentUrl)**:
    ```json
    {
        "status": "error",
        "message": "Duplicate paymentUrl found",
        "error_code": "DUPLICATE_PAYMENT_URL",
        "duplicate_url": "https://pay.openai.com/duplicate-url"
    }
    ```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–æ–≤:**
   ```bash
   # –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª test_api.env –≤ –∫–æ—Ä–Ω–µ amogt/
   cp test_api.env.example test_api.env
   
   # –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª test_api.env:
   API_TOKEN=your_test_token_here
   API_URL=https://yourdomain.com/amogt/gpt_payment_api/api.php
   ```

2. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   ```bash
   # –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):
   # APP_ENV –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∏–ª–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ 'test'
   
   # –î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω:
   export APP_ENV=production
   # –∏–ª–∏ –≤ .htaccess: SetEnv APP_ENV production
   ```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

1. **–¢–µ—Å—Ç –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–æ–≥–æ API:**
   ```bash
   php test_partner_api.php
   ```
   
   –≠—Ç–æ—Ç —Ç–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
   - –ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –ø–∞—Ä—Ç–Ω–µ—Ä–∞
   - –û—Ç–ø—Ä–∞–≤–∫—É –ª–∏–¥–æ–≤ —á–µ—Ä–µ–∑ API
   - –û–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –∏ –¥—É–±–ª–µ–π
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—é dealId –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

2. **–¢–µ—Å—Ç –ø–∞—Ä—Å–µ—Ä–∞ —Å—Å—ã–ª–æ–∫:**
   ```bash
   php test_stripe_parser.php
   ```
   
   –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø–∞—Ä—Å–∏–Ω–≥–∞:
   - Stripe Payment Links (–≤–∫–ª—é—á–∞—è —Ç–µ—Å—Ç–æ–≤—ã–µ)
   - PayPal Invoice Links
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—É–º–º—ã –∏ –≤–∞–ª—é—Ç—ã

3. **–¢–µ—Å—Ç –æ—Ç—á–µ—Ç–æ–≤ Zeno:**
   ```bash
   php test_zeno_report.php
   ```

4. **–¢–µ—Å—Ç –≤–µ–±—Ö—É–∫–∞ AmoCRM:**
   ```bash
   php test_amo2json.php
   ```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

- **–û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –≤–µ–±—Ö—É–∫–æ–≤:** `test_webhook_sender.html`
- **–û—Ç–ª–∞–¥–∫–∞ Stripe:** `stripe_debug.html` (–≤ data_test/)
- **–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–∏–¥–æ–≤:** `alldeals_json.php`

### –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤

–ü—Ä–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
‚úÖ Partner authentication: SUCCESS
‚úÖ Balance retrieval: SUCCESS  
‚úÖ Lead submission: SUCCESS
‚úÖ Server-generated dealId: SUCCESS
‚úÖ Duplicate paymentUrl rejection: SUCCESS
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –û–∫—Ä—É–∂–µ–Ω–∏–π

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `.env` —Ñ–∞–π–ª—ã –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

- **`.env.test`** - –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **`.env.production`** - –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω —Å—Ä–µ–¥—ã
- **`.env.example`** - —à–∞–±–ª–æ–Ω —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

### –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ

–ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –≤—Å–µ —Ñ–∞–π–ª—ã –¥–∞–Ω–Ω—ã—Ö –∏ –ª–æ–≥–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–¥–µ–ª—è—é—Ç—Å—è –ø–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è–º:

```
amogt/
‚îú‚îÄ‚îÄ data_production/           # –ü—Ä–æ–¥–∞–∫—à–Ω –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îú‚îÄ‚îÄ allLeads.json         # ‚Üê –í—Å–µ –ª–∏–¥—ã (API + webhook)
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ data_test/                # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ  
‚îÇ   ‚îú‚îÄ‚îÄ allLeads.json         # ‚Üê –í—Å–µ –ª–∏–¥—ã (API + webhook)
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ logs_production/          # –ü—Ä–æ–¥–∞–∫—à–Ω –ª–æ–≥–∏
‚îú‚îÄ‚îÄ logs_test/               # –¢–µ—Å—Ç–æ–≤—ã–µ –ª–æ–≥–∏
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ APP_ENV

**Apache + .htaccess (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω):**
```apache
# –í amogt/.htaccess
SetEnv APP_ENV production
```

**Linux/macOS –∫–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞:**
```bash
# –í—Ä–µ–º–µ–Ω–Ω–æ –¥–ª—è —Å–µ—Å—Å–∏–∏:
export APP_ENV=production

# –ü–æ—Å—Ç–æ—è–Ω–Ω–æ (–¥–æ–±–∞–≤–∏—Ç—å –≤ ~/.bashrc):
echo 'export APP_ENV=production' >> ~/.bashrc
```

**Nginx + PHP-FPM:**
```ini
# –í www.conf
env[APP_ENV] = production
```

–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –æ–ø–∏—Å—ã–≤–∞–µ—Ç, –∫–∞–∫ –≤–Ω–µ—à–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Zeno) –¥–æ–ª–∂–Ω—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞—á (–ª–∏–¥–æ–≤) –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç—á–µ—Ç–æ–≤ –æ–± –∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏.

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ª–∏–¥–æ–≤ (–∑–∞–¥–∞—á)

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ —Ç–µ–∫—É—â–∏—Ö –ª–∏–¥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ç—Ä–µ–±—É—é—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏, —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –¥–æ–ª–∂–Ω–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç—å GET-–∑–∞–ø—Ä–æ—Å –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —ç–Ω–¥–ø–æ–∏–Ω—Ç—É:

*   **URL**: `https://–≤–∞—à_–¥–æ–º–µ–Ω/amogt/amodeals_json.php` (–±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤)
*   **–ú–µ—Ç–æ–¥**: `GET`
*   **–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (200 OK)**:
    ```json
    {
        "deals": [
            {
                "dealId": "14252569",
                "paymentUrl": "https://pay.openai.com/...",
                "created_at": "2025-06-09 08:47:02",
                "last_updated": "2025-06-09 08:47:02",
                "partnerId": "partner_id_–µ—Å–ª–∏_–µ—Å—Ç—å", // –ü–æ–ª–µ –±—É–¥–µ—Ç –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å, –µ—Å–ª–∏ –ª–∏–¥ –æ—Ç –ø–∞—Ä—Ç–Ω–µ—Ä–∞
                "partner_name": "–ò–º—è –ø–∞—Ä—Ç–Ω–µ—Ä–∞ –µ—Å–ª–∏ –µ—Å—Ç—å" 
                // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –¥–ª—è –ª–∏–¥–∞ ...
            },
            // ... –¥—Ä—É–≥–∏–µ –ª–∏–¥—ã
        ],
        "total": X, // –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–∏–¥–æ–≤
        "message": "Current deals in JSON file.",
        "info": {
            'usage' => 'How to use this script:',
            'delete_all' => 'To delete all deals: ?deleteall=1',
            'view_all' => 'To view all deals: access without parameters',
            'example_delete_all' => 'Example: amodeals_json.php?deleteall=1',
            'note' => 'This script primarily manages a local JSON file of deal IDs.'
        }
    }
    ```
*   **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –¥–æ–ª–∂–Ω–∞ —Å–∞–º–∞ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–∏–µ –∏–∑ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –ª–∏–¥–æ–≤ —è–≤–ª—è—é—Ç—Å—è "–Ω–æ–≤—ã–º–∏" –∏–ª–∏ "–Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–º–∏" (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—Ä–∞–≤–Ω–∏–≤–∞—è —Å —Ä–∞–Ω–µ–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–º–∏ ID –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—è—è –Ω–∞–ª–∏—á–∏–µ –æ—Ç—á–µ—Ç–∞ –≤ `zeno_report.json`).

### 2. –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á–µ—Ç–∞ –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã –ø–æ –ª–∏–¥—É, —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç—á–µ—Ç —á–µ—Ä–µ–∑ —Å–ª–µ–¥—É—é—â–∏–π —ç–Ω–¥–ø–æ–∏–Ω—Ç:

*   **URL**: `https://–≤–∞—à_–¥–æ–º–µ–Ω/amogt/zeno_report.php?id={lead_id}`
    *   `{lead_id}`: ID –ª–∏–¥–∞ (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç `dealId` –∏–∑ —Ñ–∞–π–ª–∞ `allLeads.json`).
*   **–ú–µ—Ç–æ–¥**: `GET` (–¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ GET-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã)
*   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã (–≤ GET-–∑–∞–ø—Ä–æ—Å–µ)**:
    *   `status` (string, required): –°—Ç–∞—Ç—É—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ª–∏–¥–∞. –û–∂–∏–¥–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: "–£—Å–ø–µ—à–Ω–æ", "–û–®–ò–ë–ö–ê!".
    *   `amount` (string, optional): –°—É–º–º–∞ (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ).
    *   `currency` (string, optional): –í–∞–ª—é—Ç–∞ (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ).
    *   `email` (string, optional): Email (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ).
    *   `card` (string, optional): –ö–∞—Ä—Ç–∞ (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ).
    *   `partner_id` (string, optional): ID –ø–∞—Ä—Ç–Ω–µ—Ä–∞, –µ—Å–ª–∏ –æ—Ç—á–µ—Ç –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–æ–º—É –ª–∏–¥—É (—ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –º–æ–∂–Ω–æ –≤–∑—è—Ç—å –∏–∑ –ø–æ–ª—è `partnerId` –ª–∏–¥–∞, –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –∏–∑ `amodeals_json.php`). **–ï—Å–ª–∏ —ç—Ç–æ –ø–æ–ª–µ –ø–µ—Ä–µ–¥–∞–Ω–æ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ AmoCRM –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å—Å—è –Ω–µ –±—É–¥–µ—Ç.**
    *   *–õ—é–±—ã–µ –¥—Ä—É–≥–∏–µ –ø–æ–ª—è, –∫–æ—Ç–æ—Ä—ã–µ —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ö–æ—á–µ—Ç –ø–µ—Ä–µ–¥–∞—Ç—å –≤ –æ—Ç—á–µ—Ç–µ.*
*   **–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (200 OK)**:
    ```json
    {
        "status": "success",
        "message": "Report received and processed.",
        "report_id": "—É–Ω–∏–∫–∞–ª—å–Ω—ã–π_ID_–æ—Ç—á–µ—Ç–∞",
        "lead_id": "ID_–ª–∏–¥–∞",
        "amo_status": "success/skipped/failed",
        "amo_message": "–°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ AmoCRM"
    }
    ```
*   **–û—à–∏–±–∫–∏**: 400 (–Ω–µ–≤–µ—Ä–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã), 500 (–≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞).
*   **–õ–æ–≥–∏–∫–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞ (`zeno_report.php`)**:
    1.  –û—Ç—á–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `amogt/zeno_report.json`.
    2.  –ï—Å–ª–∏ –≤ –∑–∞–ø—Ä–æ—Å–µ **–ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç `partner_id`**, —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –æ—Ç—á–µ—Ç –ø–æ –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–æ–º—É –ª–∏–¥—É, –∏ –Ω–∏–∫–∞–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π —Å AmoCRM –Ω–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è.
    3.  –ï—Å–ª–∏ `partner_id` **–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç**:
        *   –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–µ –±—ã–ª –ª–∏ —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω –¥–∞–Ω–Ω—ã–π `lead_id` –¥–ª—è AmoCRM (–ø–æ —Ñ–∞–π–ª—É `amogt/id_of_deals_sent_to_amo.txt`).
        *   –ï—Å–ª–∏ –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω, `lead_id` –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ `amogt/id_of_deals_sent_to_amo.txt`.
        *   –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –ø–æ–∏—Å–∫ —Å–¥–µ–ª–∫–∏ –≤ AmoCRM –ø–æ `lead_id`.
        *   –ï—Å–ª–∏ —Å–¥–µ–ª–∫–∞ –Ω–∞–π–¥–µ–Ω–∞ –∏ –µ–µ –ø–æ–ª–µ —Å—Ç–∞—Ç—É—Å–∞ ("–°—Ç–∞—Ç—É—Å –æ–ø–ª–∞—Ç—ã ChatGPT") –ø—É—Å—Ç–æ–µ, —Ç–æ –ø–æ–ª—è —Å–¥–µ–ª–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è, –∏, –µ—Å–ª–∏ –æ—Ç—á–µ—Ç–Ω—ã–π —Å—Ç–∞—Ç—É—Å –Ω–µ "–û–®–ò–ë–ö–ê!", —Å–¥–µ–ª–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—Å—è –Ω–∞ —ç—Ç–∞–ø "–§–∏–Ω–∞–ª—å–Ω—ã–π –û–ø–µ—Ä–∞—Ç–æ—Ä—Å–∫–∏–π".

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, `amogt/allLeads.json` —è–≤–ª—è–µ—Ç—Å—è —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º –¥–∞–Ω–Ω—ã—Ö –æ –ª–∏–¥–∞—Ö, –∞ `recieved_api_ids.txt` –∏ `id_of_deals_sent_to_amo.txt` —Å–ª—É–∂–∞—Ç –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥—É–±–ª–∏—Ä—É—é—â–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π.

## –†–∞–±–æ—á–∏–µ –ü—Ä–æ—Ü–µ—Å—Å—ã (Workflows)

### 1. –ü—Ä–æ—Ü–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ª–∏–¥–∞ –∏–∑ AmoCRM
```
AmoCRM –°–¥–µ–ª–∫–∞ ‚Üí amo2json_webhook.php ‚Üí parsePaymentLink() ‚Üí [ENVIRONMENT]_data/allLeads.json
     ‚Üì
–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ (Zeno) ‚Üí alldeals_json.php ‚Üí –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–¥–∞—á
     ‚Üì
–û–±—Ä–∞–±–æ—Ç–∫–∞ –ª–∏–¥–∞ ‚Üí zeno_report.php ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ AmoCRM (–µ—Å–ª–∏ –Ω–µ –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏–π)
```

### 2. –ü—Ä–æ—Ü–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ª–∏–¥–∞ –æ—Ç –ø–∞—Ä—Ç–Ω–µ—Ä–∞ (–û–ë–ù–û–í–õ–ï–ù–û)
```
–ü–∞—Ä—Ç–Ω–µ—Ä ‚Üí POST /api.php?action=submit_partner_lead ‚Üí –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞
     ‚Üì
–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–µ–π paymentUrl ‚Üí parsePaymentLink() ‚Üí –≥–µ–Ω–µ—Ä–∞—Ü–∏—è dealId (—Å–µ—Ä–≤–µ—Ä)
     ‚Üì
–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ [ENVIRONMENT]_data/allLeads.json
     ‚Üì
–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ ‚Üí –ø–æ–ª—É—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ alldeals_json.php
     ‚Üì
–û—Ç—á–µ—Ç —á–µ—Ä–µ–∑ zeno_report.php (—Å partner_id) ‚Üí —Ç–æ–ª—å–∫–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ, –±–µ–∑ AmoCRM
```

### 3. –ü—Ä–æ—Ü–µ—Å—Å –ø–ª–∞—Ç–µ–∂–∞ –ø–∞—Ä—Ç–Ω–µ—Ä–∞
```
–ü–∞—Ä—Ç–Ω–µ—Ä ‚Üí calculate_payment_cost ‚Üí –ø–æ–ª—É—á–µ–Ω–∏–µ –∫—É—Ä—Å–∞ –∏ —Å—É–º–º—ã
     ‚Üì
make_payment ‚Üí —Å–ø–∏—Å–∞–Ω–∏–µ —Å –±–∞–ª–∞–Ω—Å–∞ ‚Üí —Å–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
     ‚Üì
get_transaction_status ‚Üí –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
```

### 4. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
```
–ê–¥–º–∏–Ω ‚Üí –≤—Ö–æ–¥ –≤ admin/ ‚Üí —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º–∏/–∫—É—Ä—Å–∞–º–∏
     ‚Üì
–°–æ–∑–¥–∞–Ω–∏–µ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ ‚Üí –≥–µ–Ω–µ—Ä–∞—Ü–∏—è API —Ç–æ–∫–µ–Ω–∞ ‚Üí —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ JSON
     ‚Üì
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–æ–≤ ‚Üí –∏–∑–º–µ–Ω–µ–Ω–∏–µ rates.json ‚Üí –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫ –Ω–æ–≤—ã–º –ø–ª–∞—Ç–µ–∂–∞–º
```

### 5. –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ dealId
```
–ü–∞—Ä—Ç–Ω–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ª–∏–¥ –ë–ï–ó dealId ‚Üí API –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π dealId
     ‚Üì
–§–æ—Ä–º–∞—Ç: timestamp_randomnumber (–Ω–∞–ø—Ä–∏–º–µ—Ä: 1704067200_123456)
     ‚Üì
–ì–∞—Ä–∞–Ω—Ç–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ timestamp + —Å–ª—É—á–∞–π–Ω–æ–µ —á–∏—Å–ª–æ
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–æ–≥–æ–≤ (—Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –ø–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è–º)
- **`logs_production/`** (–ø—Ä–æ–¥–∞–∫—à–Ω –ª–æ–≥–∏):
  - `amo2json.log` - –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å AmoCRM –≤–µ–±—Ö—É–∫–æ–º
  - `app.log` - –æ–±—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  - `zeno_report.log` - –æ—Ç—á–µ—Ç—ã –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
  - `submit_partner_lead.log` - –ª–∏–¥—ã –æ—Ç –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤

- **`logs_test/`** (—Ç–µ—Å—Ç–æ–≤—ã–µ –ª–æ–≥–∏):  
  - `amo2json.log` - —Ç–µ—Å—Ç–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å AmoCRM
  - `app.log` - –æ–±—â–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
  - `excel2amo.log` - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è Excel (—Ç–æ–ª—å–∫–æ –≤ —Ç–µ—Å—Ç–µ)
  - `zeno_report.log` - —Ç–µ—Å—Ç–æ–≤—ã–µ –æ—Ç—á–µ—Ç—ã –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤

### –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- **INFO** - –æ–±—ã—á–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è dealId, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–∏–¥–æ–≤)
- **WARNING** - –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (–¥—É–±–ª–∏ paymentUrl, –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ —Å—Ä–µ–¥—Å—Ç–≤)
- **ERROR** - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ (–æ—à–∏–±–∫–∏ API, —Ñ–∞–π–ª–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏)

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è–º
–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –æ–∫—Ä—É–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `APP_ENV` –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –ª–æ–≥–∏ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:

```php
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ª–æ–≥–æ–≤:
if ($_ENV['APP_ENV'] === 'production') {
    $log_dir = 'logs_production/';
} else {
    $log_dir = 'logs_test/';
}
```

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –î–æ—Å—Ç—É–ø
- –í—Å–µ –ª–æ–≥–∏ –∑–∞—â–∏—â–µ–Ω—ã `.htaccess`
- –ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –ø–æ–ª–Ω–æ–º –æ–±—ä–µ–º–µ
- API —Ç–æ–∫–µ–Ω—ã –º–∞—Å–∫–∏—Ä—É—é—Ç—Å—è –≤ –ª–æ–≥–∞—Ö –∫–∞–∫ `***masked***`
- paymentUrl –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç–∏—á–Ω–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### –ü—Ä–∏–º–µ—Ä—ã –ª–æ–≥-–∑–∞–ø–∏—Å–µ–π

**–£—Å–ø–µ—à–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è dealId:**
```
[2025-01-15 10:30:15] INFO: Generated dealId for partner partner_123: 1705312215_456789
```

**–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –¥—É–±–ª—è paymentUrl:**
```
[2025-01-15 10:31:20] WARNING: Duplicate paymentUrl detected: https://pay.openai.com/***partial***
```

**–û—à–∏–±–∫–∞ API:**
```
[2025-01-15 10:32:10] ERROR: Failed to save lead data: Permission denied for allLeads.json
```

## –ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –ü—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –Ω–æ–≤—ã–º API (PHP)

```php
<?php
function submitLeadsToAPI($leads, $api_token, $api_url) {
    $data = [
        'action' => 'submit_partner_lead',
        'api_token' => $api_token,
        'lead_data' => $leads // –ù–ï –≤–∫–ª—é—á–∞–π—Ç–µ dealId - –æ–Ω –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º!
    ];
    
    $options = [
        'http' => [
            'header' => "Content-type: application/json\r\n",
            'method' => 'POST',
            'content' => json_encode($data)
        ]
    ];
    
    $context = stream_context_create($options);
    $result = file_get_contents($api_url, false, $context);
    
    return json_decode($result, true);
}

// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
$leads = [
    [
        'paymentUrl' => 'https://pay.openai.com/unique-url-1',
        'customerName' => 'John Doe',
        'customerEmail' => 'john@example.com'
    ],
    [
        'paymentUrl' => 'https://stripe.com/pay/unique-url-2',  
        'customerPhone' => '+1234567890'
    ]
];

$response = submitLeadsToAPI($leads, 'your_api_token', 'https://yourdomain.com/amogt/gpt_payment_api/api.php');

if ($response['status'] === 'success') {
    echo "–õ–∏–¥—ã –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ ID: " . implode(', ', $response['generated_deal_ids']);
} else {
    echo "–û—à–∏–±–∫–∞: " . $response['message'];
}
?>
```

### –ü—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (JavaScript/Node.js)

```javascript
async function submitLeads(leads, apiToken, apiUrl) {
    const data = {
        action: 'submit_partner_lead',
        api_token: apiToken,
        lead_data: leads // dealId –ù–ï –ø–µ—Ä–µ–¥–∞–µ–º!
    };
    
    try {
        const response = await fetch(apiUrl, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(data)
        });
        
        const result = await response.json();
        
        if (result.status === 'success') {
            console.log('–õ–∏–¥—ã –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã:', result.generated_deal_ids);
            return result;
        } else {
            throw new Error(result.message);
        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ª–∏–¥–æ–≤:', error);
        throw error;
    }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
const leads = [
    {
        paymentUrl: 'https://pay.openai.com/unique-url-1',
        customerName: 'John Doe'
    }
];

submitLeads(leads, 'your_api_token', 'https://yourdomain.com/amogt/gpt_payment_api/api.php')
    .then(response => console.log('–£—Å–ø–µ—Ö:', response))
    .catch(error => console.error('–û—à–∏–±–∫–∞:', error));
```

## Troubleshooting

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

#### 1. –û—à–∏–±–∫–∞ "Duplicate paymentUrl found"
**–ü—Ä–∏—á–∏–Ω–∞:** –ü–∞—Ä—Ç–Ω–µ—Ä –ø—ã—Ç–∞–µ—Ç—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ª–∏–¥ —Å paymentUrl, –∫–æ—Ç–æ—Ä—ã–π —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ —Å–∏—Å—Ç–µ–º–µ.

**–†–µ—à–µ–Ω–∏–µ:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–∞–∂–¥—ã–π paymentUrl —É–Ω–∏–∫–∞–ª–µ–Ω
- –ù–µ –æ—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –ª–∏–¥ –ø–æ–≤—Ç–æ—Ä–Ω–æ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥—É–±–ª–∏—Ä—É—é—â–µ–≥–æ—Å—è URL

#### 2. –û—à–∏–±–∫–∞ "Invalid API token"
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–≤–µ—Ä–Ω—ã–π –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π API —Ç–æ–∫–µ–Ω.

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å API —Ç–æ–∫–µ–Ω–∞
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –∞–∫—Ç–∏–≤–µ–Ω –≤ –∞–¥–º–∏–Ω—Å–∫–æ–π –ø–∞–Ω–µ–ª–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–æ–∫–µ–Ω –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ–ª–µ

#### 3. –û—à–∏–±–∫–∞ "Insufficient funds"
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–∞ –±–∞–ª–∞–Ω—Å–µ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ª–∏–¥–æ–≤.

**–†–µ—à–µ–Ω–∏–µ:**
- –ü–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—É—é –ø–∞–Ω–µ–ª—å
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å —á–µ—Ä–µ–∑ API: `?action=get_balance`

#### 4. dealId –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
**–ü—Ä–∏—á–∏–Ω–∞:** –ü–∞—Ä—Ç–Ω–µ—Ä –ø—ã—Ç–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π dealId –∏–ª–∏ –æ–∂–∏–¥–∞–µ—Ç —Å—Ç–∞—Ä–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ.

**–†–µ—à–µ–Ω–∏–µ:**
- –ù–ï –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ dealId –≤ lead_data - –æ–Ω –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è
- dealId –≤—Å–µ–≥–¥–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º –≤ —Ñ–æ—Ä–º–∞—Ç–µ `timestamp_random`
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ `generated_deal_ids` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

#### 5. –õ–∏–¥—ã –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è APP_ENV.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–µ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
php -r "echo getenv('APP_ENV') ?: 'test';"

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–¥–∞–∫—à–Ω (–¥–ª—è Apache):
echo "SetEnv APP_ENV production" >> .htaccess

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–∞–Ω–Ω—ã—Ö:
ls -la data_production/ data_test/
```

#### 6. –õ–æ–≥–∏ –Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –∏–ª–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞:
chmod 755 logs_production/ logs_test/
chmod 644 logs_production/*.log logs_test/*.log

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–ª–∞–¥–µ–ª—å—Ü–∞:
chown www-data:www-data logs_* -R
```

### –û—Ç–ª–∞–¥–∫–∞

#### –í–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
–í `config.php` –º–æ–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:
```php
// –î–æ–±–∞–≤–∏—Ç—å –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:
define('DEBUG_MODE', true);
define('LOG_LEVEL', 'DEBUG');
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```php
// test_config_check.php
<?php
require_once 'config.php';
echo "Environment: " . ENVIRONMENT . "\n";
echo "Data directory: " . DATA_DIR . "\n";
echo "Logs directory: " . LOGS_DIR . "\n";
echo "All leads file: " . ALL_LEADS_FILE_PATH . "\n";
?>
```

#### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ñ–∞–π–ª–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
```bash
# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤:
tail -f logs_production/app.log

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–∏–¥–æ–≤:
watch -n 5 'wc -l data_production/allLeads.json'
```

## –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏
- `submit_partner_lead.lock` - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ª–∏–¥–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–Ω—è—Ç–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∏–ª–∏ —Ç–∞–π–º–∞—É—Ç–µ
- –ó–∞—â–∏—Ç–∞ –æ—Ç race conditions –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ dealId

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
- **–ï–¥–∏–Ω—ã–π —Ñ–∞–π–ª –ª–∏–¥–æ–≤** - `allLeads.json` –¥–ª—è –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (API + webhook)
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–µ–π –ø–æ paymentUrl** - O(n) –ø–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –ª–∏–¥–∞–º
- **–°–µ—Ä–≤–µ—Ä–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è dealId** - –≥–∞—Ä–∞–Ω—Ç–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ timestamp + random
- **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ–∫—Ä—É–∂–µ–Ω–∏–π** - prod/test –¥–∞–Ω–Ω—ã–µ –∏ –ª–æ–≥–∏ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ HTTP –∑–∞–ø—Ä–æ—Å—ã –∫ AmoCRM** - —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- **–§–∞–π–ª–æ–≤–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å—Ä–µ–¥–Ω–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫ (–¥–æ 10k –ª–∏–¥–æ–≤)
- **–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ª–∏–¥–æ–≤** - –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã** - —Ç—Ä–µ–±—É–µ—Ç —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –±—ç–∫–∞–ø–∞ JSON —Ñ–∞–π–ª–æ–≤
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–µ–π O(n)** - –≤—Ä–µ–º—è –ø–æ–∏—Å–∫–∞ —Ä–∞—Å—Ç–µ—Ç –ª–∏–Ω–µ–π–Ω–æ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ª–∏–¥–æ–≤

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é

#### –î–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ (>10k –ª–∏–¥–æ–≤):
1. **–ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö** (MySQL/PostgreSQL):
   - –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ `paymentUrl` –∏ `dealId`
   - –ë–æ–ª–µ–µ –±—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–µ–π
   - –ê—Ç–æ–º–∞—Ä–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

2. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - Redis –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö paymentUrl
   - Memcached –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

3. **–û—á–µ—Ä–µ–¥–∏ —Å–æ–æ–±—â–µ–Ω–∏–π:**
   - RabbitMQ/Redis Queue –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ª–∏–¥–æ–≤
   - –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏–µ–º–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ª–∏–¥–æ–≤

#### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:
```bash
# –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –ª–∏–¥–æ–≤:
ls -lh data_production/allLeads.json

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–∏–¥–æ–≤:
jq length data_production/allLeads.json

# –ß–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π:
stat data_production/allLeads.json
```

### Backup –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±—ç–∫–∞–ø:
```bash
#!/bin/bash
# backup_script.sh
DATE=$(date +%Y%m%d_%H%M%S)
cp data_production/allLeads.json "backups/allLeads_${DATE}.json"
cp data_production/zeno_report.json "backups/zeno_report_${DATE}.json"
```

#### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ:
```bash
# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –±—ç–∫–∞–ø–∞:
cp backups/allLeads_YYYYMMDD_HHMMSS.json data_production/allLeads.json
```

### –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏
- `submit_partner_lead.lock` - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ª–∏–¥–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–Ω—è—Ç–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- JSON —Ñ–∞–π–ª—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–µ–π —á–µ—Ä–µ–∑ ID —Ñ–∞–π–ª—ã
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ HTTP –∑–∞–ø—Ä–æ—Å—ã –∫ AmoCRM

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- –§–∞–π–ª–æ–≤–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å—Ä–µ–¥–Ω–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫)
- –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ª–∏–¥–æ–≤
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã

## –î–µ—Ç–∞–ª—å–Ω–æ–µ –û–ø–∏—Å–∞–Ω–∏–µ –§—É–Ω–∫—Ü–∏–π –§–∞–π–ª–æ–≤

### API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

#### –û—Å–Ω–æ–≤–Ω–æ–π API (`api.php`)
–ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª API –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–π –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è:
- `get_balance` - –ø–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –ø–∞—Ä—Ç–Ω–µ—Ä–∞
- `calculate_payment_cost` - —Ä–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø–ª–∞—Ç–µ–∂–∞
- `make_payment` - –ø—Ä–æ–≤–µ–¥–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
- `get_transaction_status` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- `submit_partner_lead` - –ø—Ä–∏–µ–º –ª–∏–¥–æ–≤ –æ—Ç –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤

#### –í–µ–±—Ö—É–∫ AmoCRM (`amo2json_webhook.php`)
–ü—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ AmoCRM –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–¥–µ–ª–æ–∫:
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–ø–ª–∞—Ç—É –∏–∑ –ø–æ–ª–µ–π —Å–¥–µ–ª–∫–∏
- –ü–∞—Ä—Å–∏—Ç —Å—É–º–º—É –∏ –≤–∞–ª—é—Ç—É –∏–∑ —Å—Å—ã–ª–æ–∫
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ `allLeads.json`
- –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å—ã —Å–¥–µ–ª–æ–∫ –≤ AmoCRM

#### –û—Ç—á–µ—Ç—ã –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ (`zeno_report.php`)
–ü—Ä–∏–Ω–∏–º–∞–µ—Ç –æ—Ç—á–µ—Ç—ã –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ª–∏–¥–æ–≤:
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ—Ç—á–µ—Ç—ã –≤ `zeno_report.json`
- –û–±–Ω–æ–≤–ª—è–µ—Ç —Å–¥–µ–ª–∫–∏ –≤ AmoCRM –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –§–∞–π–ª—ã

#### –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (`gpt_payment_api/admin/`)
- **`index.php`** - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- **`partners.php`** - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º–∏ (—Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ)
- **`rates.php`** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–∞–º–∏ –≤–∞–ª—é—Ç
- **`transactions.php`** - –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ –∏—Ö —Å—Ç–∞—Ç—É—Å–æ–≤
- **`auth.php`** - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —á–µ—Ä–µ–∑ –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å

#### –®–∞–±–ª–æ–Ω—ã (`admin/templates/`)
- **`header.php/footer.php`** - –û–±—â–∏–π –º–∞–∫–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü
- **`dashboard.php`** - –ì–ª–∞–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏
- **`manage_partners.php`** - –§–æ—Ä–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º–∏
- **`manage_rates.php`** - –§–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫—É—Ä—Å–æ–≤
- **`view_transactions.php`** - –¢–∞–±–ª–∏—Ü–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- **`login.php`** - –§–æ—Ä–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- **`instructions.php`** - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ API

### –°–∏—Å—Ç–µ–º–Ω—ã–µ –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏

#### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (`lib/auth_partner.php`)
–ö–ª–∞—Å—Å `AuthPartner` —Å –º–µ—Ç–æ–¥–∞–º–∏:
- `isTokenValid($token)` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ —Ç–æ–∫–µ–Ω–∞
- `getPartnerByToken($token)` - –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–∞—Ä—Ç–Ω–µ—Ä–∞
- `generateToken()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ —Ç–æ–∫–µ–Ω–∞

#### –ü–ª–∞—Ç–µ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ (`lib/payment_core.php`)
–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π:
- –°–ø–∏—Å–∞–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤ —Å –±–∞–ª–∞–Ω—Å–∞ –ø–∞—Ä—Ç–Ω–µ—Ä–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- –†–∞—Å—á–µ—Ç –∫–æ–º–∏—Å—Å–∏–π
- –†–∞–±–æ—Ç–∞ —Å –∫—É—Ä—Å–∞–º–∏ –≤–∞–ª—é—Ç

#### –†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ (`lib/json_storage_utils.php`)
–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è JSON —Ñ–∞–π–ª–æ–≤:
- `loadDataFromFile($path)` - –∑–∞–≥—Ä—É–∑–∫–∞ JSON –¥–∞–Ω–Ω—ã—Ö
- `saveDataToFile($path, $data)` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ JSON –¥–∞–Ω–Ω—ã—Ö
- `loadLineDelimitedFile($path)` - –∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å—Ç—Ä–æ—á–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- `saveLineDelimitedFile($path, $lines)` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ—Å—Ç—Ä–æ—á–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

### –ü–∞—Ä—Å–∏–Ω–≥ –∏ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

#### –ü–∞—Ä—Å–µ—Ä —Å—Å—ã–ª–æ–∫ (`lib/payment_link_parser.php`)
–§—É–Ω–∫—Ü–∏—è `parsePaymentLink($url)` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:
- Stripe Payment Links
- PayPal Invoice Links
- Custom payment URLs
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—É–º–º—ã –∏ –≤–∞–ª—é—Ç—ã

#### AmoCRM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (`lib/amo_auth_utils.php`)
OAuth2 —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è AmoCRM:
- `getAccessToken()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –¥–æ—Å—Ç—É–ø–∞
- `refreshToken()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
- `makeApiRequest($endpoint, $data)` - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ API –∑–∞–ø—Ä–æ—Å–æ–≤

### –¢–µ—Å—Ç–æ–≤—ã–µ –§–∞–π–ª—ã

#### –ú–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã
- **`test_amo_auth.php`** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ AmoCRM
- **`test_stripe_parser.php`** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä—Å–µ—Ä–∞ Stripe
- **`test_partner_api.php`** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–æ–≥–æ API
- **`test_zeno_report.php`** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤

#### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- **`test_amo2json.php`** - –ø–æ–ª–Ω—ã–π —Ç–µ—Å—Ç –≤–µ–±—Ö—É–∫–∞ AmoCRM
- **`test_data_report.php`** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö

#### –û—Ç–ª–∞–¥–æ—á–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- **`stripe_debug.html`** - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Stripe
- **`test_webhook_sender.html`** - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –≤–µ–±—Ö—É–∫–æ–≤

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

#### –§–∞–π–ª—ã –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **`.env.test`** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **`.env.production`** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω —Å—Ä–µ–¥—ã
- **`.env.example`** - —à–∞–±–ª–æ–Ω —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

#### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **`.htaccess`** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Apache (–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, –∑–∞—â–∏—Ç–∞ —Ñ–∞–π–ª–æ–≤)
- **`.gitignore`** - –∏—Å–∫–ª—é—á–µ–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –∏–∑ Git
- **`logs_*/index.php`** - –∑–∞—â–∏—Ç–∞ –ª–æ–≥–æ–≤ –æ—Ç –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä—ã –î–∞–Ω–Ω—ã—Ö

#### –õ–∏–¥—ã (`allLeads.json`) - –û–ë–ù–û–í–õ–ï–ù–ù–ê–Ø –°–¢–†–£–ö–¢–£–†–ê
```json
{
  "dealId": "1705312215_456789",        // –í—Å–µ–≥–¥–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º
  "paymentUrl": "https://pay.openai.com/unique-url",  // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π URL
  "partnerId": "partner_123",           // ID –ø–∞—Ä—Ç–Ω–µ—Ä–∞ (–µ—Å–ª–∏ –ª–∏–¥ –æ—Ç –ø–∞—Ä—Ç–Ω–µ—Ä–∞)
  "partner_name": "Partner Name",       // –ò–º—è –ø–∞—Ä—Ç–Ω–µ—Ä–∞ (–µ—Å–ª–∏ –ª–∏–¥ –æ—Ç –ø–∞—Ä—Ç–Ω–µ—Ä–∞)
  "amount": 20.00,                      // –°—É–º–º–∞ (–µ—Å–ª–∏ —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω–∞)
  "currency": "USD",                    // –í–∞–ª—é—Ç–∞ (–µ—Å–ª–∏ —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω–∞)  
  "customerName": "John Doe",           // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–æ–ª—è
  "customerEmail": "john@example.com",  // –æ—Ç –ø–∞—Ä—Ç–Ω–µ—Ä–∞
  "created_at": "2025-01-15 10:30:15",
  "last_updated": "2025-01-15 10:30:15"
}
```

**–ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `dealId` –≤—Å–µ–≥–¥–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `timestamp_random` (–Ω–∞–ø—Ä–∏–º–µ—Ä: `1705312215_456789`)
- `paymentUrl` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –≤ —Ä–∞–º–∫–∞—Ö –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã
- –ü–æ–ª—è `partnerId` –∏ `partner_name` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –ª–∏–¥–æ–≤ –æ—Ç –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤
- –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –ª–∏–¥–æ–≤ –∏–∑ AmoCRM –∏ –æ—Ç –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤

#### –û—Ç—á–µ—Ç—ã (`zeno_report.json`) - –ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô
```json
{
  "report_id": "zenorep_1705312800_789",
  "lead_id": "1705312215_456789",      // –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç dealId –∏–∑ allLeads.json
  "status": "–£—Å–ø–µ—à–Ω–æ",
  "amount": "1000",
  "currency": "RUB", 
  "email": "user@example.com",
  "card": "****1234",
  "partner_id": "partner_123",         // –ï—Å–ª–∏ –æ—Ç—á–µ—Ç –ø–æ –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–æ–º—É –ª–∏–¥—É
  "timestamp": "2025-01-15 11:00:00"   
}
```

#### –§–∞–π–ª—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –¥—É–±–ª–µ–π

**`recieved_api_ids.txt` - –£–î–ê–õ–ï–ù**
–ë–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–µ–π —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ `paymentUrl` –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Ñ–∞–π–ª–µ `allLeads.json`.

**`id_of_deals_sent_to_amo.txt` - –ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô**
–ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π AmoCRM:
```
1705312215_456789
1705312300_789012
...
```

### –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º, –Ω–µ –æ–ø–∏—Å–∞–Ω–Ω—ã—Ö –≤ –¥–∞–Ω–Ω–æ–º —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–µ:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é API
3. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É —Å–∏—Å—Ç–µ–º—ã —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –æ–± –æ—à–∏–±–∫–∞—Ö
